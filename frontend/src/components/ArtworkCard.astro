---
export interface Props {
    id: string;
    title: string;
    description: string;
    imageUrl: string;
}
---
<div>
    <h2>{title}</h2>
    <img src={imageUrl} alt={title} />
    <p>{description}</p>
    <button onclick={`deleteArtwork('${id}')`}>Delete</button>
    <button onclick={`editArtwork('${id}')`}>Edit</button>
</div>

<script type="module">
    const deleteArtwork = async (id) => {
        try {
            const response = await fetch(`http://localhost:3000/api/artworks/${id}`, {
                method: 'DELETE',
                credentials: 'include',
            });

            if (response.ok) {
                alert('Artwork deleted successfully!');
                window.location.reload(); // Refresh the page
            } else {
                const data = await response.json();
                alert(data.error || 'Failed to delete artwork.');
            }
        } catch (err) {
            alert('An error occurred while deleting artwork.');
            console.error(err);
        }
    };

    const editArtwork = async (id) => {
        // Implement the logic for editing an artwork
        alert(`Editing artwork with ID: ${id}`);
    };
</script>
